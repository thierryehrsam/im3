<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Metabeats</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=League+Gothic&family=Lily+Script+One&family=Micro+5&display=swap');
    </style>
</head>

<body>

    <header>
        <a href="#info">
            <h1 class="logo">MetaBeats</h1>
        </a>
    </header>

    <main class="page" id="page">

        <!-- SPALTE 1: Wetter + Top 5 -->
        <section id="top5LastWeek" class="card">
            <h2>Wetter letzte Woche</h2>
            <div id="weatherLastWeek"></div>
            <h2>Top 5 Genres</h2>
            <ol class="topNumber" id="topGenresLastWeek"></ol>

            <!-- <h3 class="topNumber">1. <span class="genre1">Pop</span></h3> -->
            <!-- … dein bestehender Inhalt hier … -->
        </section>
        <div class="wrap">
            <section class="main-box">
                <h2>So funktioniert's</h2>
                <p class="text">Diese Seite untersucht, ob das Wetter in der Schweiz Einfluss auf die gehörten
                    Musikgenres hat.
                    Dafür kombinieren wir Wetterdaten von Open-Meteo mit den beliebtesten Artists von Last.fm und leiten
                    daraus
                    die meistgehörten Genres ab. Jede Woche zeigen wir das Wetter im Vergleich zu den Top-Genres.
                    Ebenfalls sind
                    die meistgehörten Genres pro Wetter und die Entwicklung von verschiedenen Genres aufrufbar.</p>
                <a href="info.html" class="button">Weitere Infos</a>

                <div class="detailinfo">
                    <section id="info_methodik">
                        <h3 class="third">Methodik</h3>
                        <p class="text">Die Daten werden in einem mehrstufigen ETL-Prozess (Extract, Transform, Load)
                            verarbeitet. Zuerst werden mithilfe von PHP-Skripten aktuelle Wetterdaten über die
                            Open-Meteo-API sowie Musikdaten über die Last.fm-API abgerufen. Dabei liefern die
                            Extract-Skripte Rohdaten zu Temperatur, Wetterlage, Top-Tracks, Artists und den
                            dazugehörigen Genre-Tags. Anschliessend werden diese Daten in mehreren
                            Transformationsschritten bereinigt und vereinheitlicht: Die Wetterdaten werden nach Datum
                            und Temperatur aggregiert und erhalten zusätzlich eine Wetterkategorie wie «sonnig» oder
                            «bewölkt». Bei den Musikdaten werden die häufigsten Genre-Tags extrahiert, auf eine
                            festgelegte Genreliste gemappt und in ein einheitliches Format gebracht.
                            <br><br>
                            Nach der Umwandlung werden die bereinigten Datensätze in eine eigene Datenbank geladen. Dort
                            werden sie fortlaufend gespeichert, sodass sich mit der Zeit ein verlaufsorientierter
                            Datensatz bildet. Das Frontend greift anschliessend nicht direkt auf die APIs zu, sondern
                            ruft die gespeicherten Daten aus der Datenbank ab. Dadurch können auf der Website Trends und
                            Zusammenhänge zwischen Wetter und Musik über mehrere Wochen hinweg zuverlässig visualisiert
                            und analysiert werden.<br><br>
                        </p>
                    </section>

                    <section id="info_weatherLastWeek">
                        <h3 class="info_header">Wetter letzte Woche</h3>
                        <p class="text">In diesem Abschnitt ist das Wetter der letzten Woche (einzelne Tage)
                            angezeigt. Dazu werden die 5 meistgehörten Genre der letzten Woche aufgelistet.</p>
                    </section>

                    <section id="info_GenresByWeather">
                        <h3 class="info_header">Top Genres nach Wetter</h3>
                        <p class="text">In diesem Abschnitt werden die meistgehörten Genres der letzten Woche in Bezug
                            auf das Wetter
                            angezeigt. Dazu werden die Wetterdaten mit den gehörten Genres kombiniert und analysiert.
                        </p>
                    </section>

                    <section id="info_GenreDevelopment">
                        <h3 class="info_header">Entwicklung Genre-Beliebtheit</h3>
                        <p class="text">In diesem Abschnitt ist die Entwicklung des Anteils eines bestimmten Genres, im
                            Verhältnis zu
                            den anderen Genres ersichtlich. Beim Hover über einen Datenpunkt werden zudem die
                            Wetter-Verhältnisse am
                            jeweiligen Tag eingeblendet.</p>

                    </section>
            </section>
            <section class="side-box top" id="topBox">
                <h3 class="side-box__label vertical light">Top Genres nach Wetter</h3>
                <div class="side-box__text">
                    <h2 class="light">Top Genres nach Wetter</h2>
                    <button class="sidepanel__close" type="button" aria-label="Schliessen">×</button>
                    <div class="weather-nav">
                        <div class="weather-btn active" data-weather="sonnig">
                            <img src="../images/sonnig.svg" alt="Sonnig">
                        </div>
                        <div class="weather-btn" data-weather="bewoelkt">
                            <img src="../images/bewoelkt.svg" alt="Bewölkt">
                        </div>
                        <div class="weather-btn" data-weather="regen">
                            <img src="../images/regen.svg" alt="Regen">
                        </div>
                        <div class="weather-btn" data-weather="schnee">
                            <img src="../images/schnee.svg" alt="Schnee">
                        </div>
                    </div>
                    <canvas id="topGenresPerWeatherChart"></canvas>
                </div>
            </section>
            <section class="side-box bottom" id="bottomBox">
                <h3 class="side-box__label vertical light">Entwicklung Genre Beliebtheit</h3>
                <div class="side-box__text">
                    <div class="box-header">
                        <h2 class="light">Entwicklung Genre Beliebtheit</h2>
                        <button class="sidepanel__close" type="button" aria-label="Schliessen">×</button>
                    </div>
                    <canvas id="genreDevelopmentChart"></canvas>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <h4>Interaktive Medien 3 | HS25 | mmp24b</h4>
        <h4>by Thierry Ehrsam und Benjamin Zuberbühler</h4>
    </footer>


    <script type="module" src="js/chart_script.js"></script>
    <script type="module" src="js/panel_script.js"></script>

</body>

</html>